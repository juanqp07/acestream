name: Actualizar M3U (acestream->http)


on:
schedule:
- cron: '*/15 * * * *'
workflow_dispatch:


permissions:
contents: write


jobs:
update:
runs-on: ubuntu-latest


env:
HOST: 127.0.0.1
PORT: 6878
SOURCE_URL: https://raw.githubusercontent.com/Icastresana/lista1/refs/heads/main/eventos.m3u


steps:
- name: Checkout repository
uses: actions/checkout@v4
with:
fetch-depth: 0


- name: Setup Python
uses: actions/setup-python@v4
with:
python-version: '3.10'


- name: Descargar M3U origen
run: |
curl -fsSL "$SOURCE_URL" -o playlist.m3u


- name: Ejecutar script para actualizar M3U
run: |
python3 update_m3u_acestream.py --url "$SOURCE_URL" --output playlist.m3u --host "$HOST" --port $PORT
